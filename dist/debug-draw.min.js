(function(t,e){"use strict";function i(t){return t({uniforms:{view:t.prop("view"),projection:t.prop("projection")}})}function s(t,i,s,r){let a=[];let c=e.mat4.array(new Float32Array(16),e.mat4.create());let h=i*.5;let o=s*.5;let n=i/r;let p=s/r;for(let t=-h;t<=h;t+=n){a.push(t,0,-o);a.push(t,0,o)}for(let t=-o;t<=o;t+=p){a.push(-h,0,t);a.push(h,0,t)}return t({blend:{enable:true,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},vert:`
      precision mediump float;
      uniform mat4 model, view, projection;

      attribute vec3 a_pos;

      void main() {
        vec4 pos = projection * view * model * vec4(a_pos, 1);

        gl_Position = pos;
      }
    `,frag:`
      precision mediump float;

      void main () {
        gl_FragColor = vec4(0.5, 0.5, 0.5, 0.5);
      }
    `,primitive:"lines",attributes:{a_pos:a},uniforms:{model:c},count:a.length/3})}function r(t){let i=t({vert:`
      precision mediump float;
      uniform mat4 model, view, projection;

      attribute vec3 a_pos;

      void main() {
        vec4 pos = projection * view * model * vec4(a_pos, 1);

        gl_Position = pos;
      }
    `,frag:`
      precision mediump float;
      uniform vec3 color;

      void main () {
        gl_FragColor = vec4(color, 1.0);
      }
    `,primitive:"lines",attributes:{a_pos:t.prop("line")},uniforms:{model:t.prop("transform"),color:t.prop("color")},count:2});const s=e.mat4.array(new Float32Array(16),e.mat4.create());const r=[[0,0,0],[1,0,0]];const a=[[0,0,0],[0,1,0]];const c=[[0,0,0],[0,0,1]];const h=[1,0,0];const o=[0,1,0];const n=[0,0,1];return function(t){t=t||s;i([{line:r,color:h,transform:t},{line:a,color:o,transform:t},{line:c,color:n,transform:t}])}}let a=10;let c=10;let h=e.vec3.new(0,0,-1);let o=e.vec3.new(1,0,0);let n=e.vec3.new(0,1,0);let p=e.quat.create();let u=e.quat.create();let _=e.quat.create();let l=e.mat3.create();let d=e.vec3.create();let f=e.vec3.create();let m=e.vec3.create();let v=e.vec3.create();let y=e.vec3.create();class w{constructor(t,i){i=i||{};i.theta=i.theta||0;i.phi=i.phi||0;i.eye=i.eye||e.vec3.new(0,0,0);i.near=i.near||.01;i.far=i.far||1e3;this._props=i;this._cache={view:new Float32Array(16),proj:new Float32Array(16)};this._input=t;this._view=e.mat4.create();this._proj=e.mat4.create();this._df=0;this._dr=0;this._panX=0;this._panY=0;this._panZ=0;this._curTheta=i.theta;this._curPhi=i.phi;this._curEye=e.vec3.clone(i.eye);this._theta=i.theta;this._phi=i.phi;this._eye=e.vec3.clone(i.eye)}tick(t,i,s){this._handleInput();this._calcView(t);this._calcProj(i,s);e.mat4.array(this._cache.view,this._view);e.mat4.array(this._cache.proj,this._proj)}_handleInput(){let t=this._input;this._df=0;this._dr=0;this._panX=0;this._panY=0;this._panZ=0;if(t.mousepress("left")&&t.mousepress("right")){let e=t.mouseDeltaX;let i=t.mouseDeltaY;this._panX=e;this._panY=-i}else if(t.mousepress("left")){let e=t.mouseDeltaX;let i=t.mouseDeltaY;this._theta-=e*.002;this._panZ=-i}else if(t.mousepress("right")){let e=t.mouseDeltaX;let i=t.mouseDeltaY;this._theta-=e*.002;this._phi-=i*.002}if(t.keypress("w")){this._df+=1}if(t.keypress("s")){this._df-=1}if(t.keypress("a")){this._dr-=1}if(t.keypress("d")){this._dr+=1}if(t.mouseScrollY){this._df-=t.mouseScrollY*.05}}_calcView(t){this._curPhi=e.lerp(this._curPhi,this._phi,t*a);this._curTheta=e.lerp(this._curTheta,this._theta,t*a);let i=this._eye;let s=this._curPhi;let r=this._curTheta;let w=this._panX;let A=this._panY;let Y=this._panZ;e.quat.identity(u);e.quat.identity(_);e.quat.rotateX(u,u,s);e.quat.rotateY(_,_,r);e.quat.mul(p,_,u);e.mat3.fromQuat(l,p);e.vec3.transformMat3(d,h,l);e.vec3.transformMat3(m,n,l);e.vec3.transformMat3(f,o,l);if(this._df!==0){e.vec3.scaleAndAdd(i,i,d,this._df*t*c)}if(this._dr!==0){e.vec3.scaleAndAdd(i,i,f,this._dr*t*c)}if(Y!==0){e.vec3.copy(v,d);v.y=0;e.vec3.normalize(v,v);e.vec3.scaleAndAdd(i,i,v,Y*t*c)}if(w!==0){e.vec3.copy(y,f);y.y=0;e.vec3.normalize(y,y);e.vec3.scaleAndAdd(i,i,y,w*t*c)}if(A!==0){e.vec3.scaleAndAdd(i,i,n,A*t*c)}e.vec3.lerp(this._curEye,this._curEye,i,t*a);e.mat4.lookAt(this._view,this._curEye,e.vec3.scaleAndAdd(v,this._curEye,d,1),m)}_calcProj(t,i){e.mat4.perspective(this._proj,Math.PI/4,t/i,this._props.near,this._props.far)}}t.common=i;t.grid=s;t.coord=r;t.Orbit=w})(this.ddraw=this.ddraw||{},window.vmath);
//# sourceMappingURL=./dist/debug-draw.min.js.map